# Detekt Static Analysis Configuration
# Focuses on preventing bugs and nullable safety issues
# Adjusted thresholds for a Minecraft plugin with Discord integration

build:
  maxIssues: -1  # Report issues but don't fail build

complexity:
  active: true
  CyclomaticComplexMethod:
    active: true
    threshold: 25  # Plugin initialization and command handlers have many branches
  LongMethod:
    active: true
    threshold: 180  # Plugin onEnable (170 lines) is legitimately long for initialization
  LongParameterList:
    active: true
    functionThreshold: 10  # Graphics functions need many params
    constructorThreshold: 10
    ignoreDefaultParameters: true
    ignoreDataClasses: true
  TooManyFunctions:
    active: true
    thresholdInFiles: 25
    thresholdInClasses: 22  # Service classes have many methods
    thresholdInInterfaces: 22
    thresholdInObjects: 22  # Utility objects have many methods (SkillBadges has 20)
    thresholdInEnums: 22
  NestedBlockDepth:
    active: true
    threshold: 5

exceptions:
  active: true
  TooGenericExceptionCaught:
    active: false  # Resilience code (retry, timeout, circuit breaker) catches Exception by design
  SwallowedException:
    active: false  # Timeout/retry code intentionally catches and handles without rethrowing
  TooGenericExceptionThrown:
    active: false  # Tests often throw RuntimeException for simplicity

naming:
  active: true
  VariableNaming:
    active: true
    variablePattern: '[a-z][A-Za-z0-9]*'
    privateVariablePattern: '(_)?[a-z][A-Za-z0-9]*'
    excludeClassPattern: '$^'

style:
  active: true
  MagicNumber:
    active: false  # Too many false positives for color codes and time constants
  MaxLineLength:
    active: true
    maxLineLength: 160  # Accommodates log messages and builder chains
    excludeCommentStatements: true
    excludePackageStatements: true
    excludeImportStatements: true
    excludeRawStrings: true
  ReturnCount:
    active: true
    max: 6  # Command handlers often have multiple early returns for validation
    excludeLabeled: true
    excludeReturnFromLambda: true
    excludeGuardClauses: true
  ThrowsCount:
    active: true
    max: 4  # Validation functions may throw multiple exceptions
  LoopWithTooManyJumpStatements:
    active: false  # Retry loops legitimately use break/continue
  UseRequire:
    active: false  # Sometimes explicit throws are clearer
  UnusedParameter:
    active: true
    allowedNames: "ignored|expected|event"  # Event handlers often don't use event
  WildcardImport:
    active: true
    excludeImports:
      - java.util.*
      - kotlinx.coroutines.*

potential-bugs:
  active: true
  ImplicitDefaultLocale:
    active: false  # Not a concern for Minecraft plugin display strings
